<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Word Web Game</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="game-container">
    <!-- SVG for connection lines -->
    <svg id="svg-connections"></svg>
    
    <!-- Word Slots Area (Top 60%) -->
    <div id="word-slots-area">
      <div id="word-slots"></div>
    </div>
    
    <!-- Word Bank Area (Bottom 40%) -->
    <div id="word-bank-area">
      <div id="word-bank"></div>
    </div>
    
  <!-- Replay Button -->
  <button id="replay-btn" class="control-btn">Replay</button>
  <!-- Undo Button -->
    <button id="undo-btn" class="undo-btn">
      <span class="undo-icon" aria-label="Undo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="24" height="24">
          <path d="M9 14L4 9l5-5"/>
          <path d="M20 20v-7a4 4 0 00-4-4H4"/>
        </svg>
      </span>
      <span class="undo-label">UNDO</span>
      <span id="undo-count" class="undo-count"></span>
    </button>
    
    <!-- Success Screen -->
    <div id="success-screen" class="hidden">
      <h2>Level Complete! ðŸŽ‰</h2>
      <button id="next-btn" class="control-btn">Next Level</button>
    </div>
  </div>
  
  <!-- Level Editor -->
  <div id="editor-container">
    <div id="editor-controls">
      <h2>Level Editor</h2>
      
      <!-- Slot Creation Section (Independent of words) -->
      <div style="margin-bottom:15px; padding:10px; background:#e8f5e9; border-radius:6px;">
        <h3 style="font-size:14px; margin-bottom:8px; color:#2e7d32; font-weight:bold;">Create Slots</h3>
        <label style="display:block; font-size:12px; margin-bottom:4px; color:#555;">Slot Length:</label>
        <select id="editor-slot-length" style="width:100%; margin-bottom:8px; padding:6px; border-radius:4px; border:1px solid #ccc;">
          <option value="2">2 squares</option>
          <option value="3">3 squares</option>
          <option value="4">4 squares</option>
          <option value="5">5 squares</option>
          <option value="6">6 squares</option>
          <option value="7">7 squares</option>
          <option value="8">8 squares</option>
          <option value="9">9 squares</option>
          <option value="10">10 squares</option>
        </select>
        <label style="display:block; font-size:12px; margin-bottom:4px; color:#555;">Number of Slots:</label>
        <input id="editor-slot-count" type="number" min="1" max="10" value="1" style="width:100%; margin-bottom:8px; padding:6px; border-radius:4px; border:1px solid #ccc;">
        <button id="editor-create-slots" style="width:100%; padding:8px; background:#4caf50; color:white; border:none; border-radius:4px; cursor:pointer; font-weight:bold;">Create Slots</button>
      </div>
      
      <!-- Word Input Section -->
      <input id="editor-word-input" type="text" placeholder="Enter word (e.g., VIEW)" maxlength="12" style="width:100%; margin-bottom:10px;">
      
      <!-- Add Slots Toggle -->
      <div style="margin-bottom:10px; padding:8px; background:#f0f0f0; border-radius:6px;">
        <label style="display:flex; align-items:center; cursor:pointer; font-size:13px;">
          <input type="checkbox" id="editor-add-slots-toggle" checked style="margin-right:8px; width:16px; height:16px; cursor:pointer;">
          <span>Add slots with words</span>
        </label>
      </div>
      
      <button id="editor-add-word" style="width:100%; margin-bottom:10px;">Add Word</button>
      
      <!-- Draw Toggle -->
      <div style="margin-bottom:15px; padding:10px; background:#f0f0f0; border-radius:6px;">
        <label style="display:flex; align-items:center; cursor:pointer; font-size:14px; font-weight:bold;">
          <input type="checkbox" id="editor-draw-toggle" style="margin-right:8px; width:18px; height:18px; cursor:pointer;">
          <span>Draw Mode</span>
        </label>
        <div id="editor-selection-info" style="margin-top:8px; font-size:12px; color:#666; min-height:20px;">
          <!-- Selection info will appear here -->
        </div>
        <button id="editor-draw-connection" disabled style="width:100%; margin-top:8px; opacity:0.5;">Draw Connection</button>
      </div>
      
      <input id="editor-conn-input" type="text" placeholder="Connection (e.g., 003,100)" maxlength="7" style="width:100%; margin-bottom:10px;">
      <button id="editor-add-conn" style="width:100%; margin-bottom:10px;">Add Connection</button>
    </div>
    <div id="editor-game-view">
      <svg id="editor-svg-connections"></svg>
  <div id="editor-word-slots-area" style="position:relative;width:100%;height:100%;">
  </div>
      <div id="editor-word-bank-area">
        <div id="editor-word-bank"></div>
      </div>
    </div>
    <!-- Right Panel: Words and Connections -->
    <div id="editor-right-panel" style="min-width:200px; max-width:200px; padding:20px; background:white; border-radius:12px; box-shadow:0 4px 16px rgba(0,0,0,0.1); height:fit-content; max-height:90vh; overflow-y:auto;">
      
      <!-- Words List Section -->
      <div style="margin-bottom:24px;">
        <h3 style="font-size:16px; margin-bottom:12px; color:#333;">Words Added</h3>
        <div id="editor-word-list" style="max-height:250px; overflow-y:auto;">
          <!-- Words will be listed here -->
        </div>
      </div>
      
      <!-- Connections List Section -->
      <div style="margin-bottom:24px;">
        <h3 style="font-size:16px; margin-bottom:12px; color:#333;">Connections</h3>
        <div id="editor-connection-list" style="max-height:300px; overflow-y:auto;">
          <!-- Connections will be listed here -->
        </div>
      </div>
      
      <!-- Actions Section -->
      <div style="border-top:1px solid #e0e0e0; padding-top:20px;">
        <h3 style="font-size:16px; margin-bottom:12px; color:#333;">Actions</h3>
        <button id="editor-build-words" style="width:100%; margin-bottom:8px; padding:10px; background:#9c27b0; color:white; border:none; border-radius:6px; cursor:pointer; font-weight:bold; font-size:13px;">ðŸ”® Build Words</button>
        <button id="editor-redraw-lines" style="width:100%; margin-bottom:8px; padding:10px; background:#2196f3; color:white; border:none; border-radius:6px; cursor:pointer; font-weight:bold; font-size:13px;">Redraw Lines</button>
        <button id="editor-shuffle-bank" style="width:100%; margin-bottom:8px; padding:10px; background:#ff9800; color:white; border:none; border-radius:6px; cursor:pointer; font-weight:bold; font-size:13px;">Shuffle Bank</button>
        <button id="editor-exit" style="width:100%; padding:10px; background:#f44336; color:white; border:none; border-radius:6px; cursor:pointer; font-weight:bold; font-size:13px;">Exit Editor</button>
      </div>
      
        </div>
  </div>
  
  <!-- Word Suggestions Popup -->
  <div id="word-suggestions-popup" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.5); z-index:3000; align-items:center; justify-content:center;">
    <div style="background:white; border-radius:12px; padding:30px; max-width:600px; max-height:80vh; overflow-y:auto; box-shadow:0 8px 32px rgba(0,0,0,0.3);">
      <h2 style="margin-bottom:20px; color:#333;">Word Suggestions ðŸ”®</h2>
      <div id="word-suggestions-status" style="margin-bottom:15px; padding:10px; background:#e3f2fd; border-radius:6px; font-size:14px; color:#1976d2;">
        Calculating combinations...
      </div>
      <div id="word-suggestions-list" style="margin-bottom:20px;">
        <!-- Combinations will be listed here -->
      </div>
      <div style="margin-bottom:15px; padding:10px; background:#f0f0f0; border-radius:6px;">
        <label style="display:flex; align-items:center; cursor:pointer; font-size:14px;">
          <input type="checkbox" id="word-suggestions-shuffle" style="margin-right:8px; width:16px; height:16px; cursor:pointer;">
          <span>Shuffle word order in bank</span>
        </label>
      </div>
      <div style="display:flex; gap:10px;">
        <button id="word-suggestions-confirm" style="flex:1; padding:12px; background:#4caf50; color:white; border:none; border-radius:6px; cursor:pointer; font-weight:bold; font-size:14px;">Add Selected Words</button>
        <button id="word-suggestions-cancel" style="flex:1; padding:12px; background:#f44336; color:white; border:none; border-radius:6px; cursor:pointer; font-weight:bold; font-size:14px;">Cancel</button>
      </div>
    </div>
  </div>
  
  <!-- Load modules in dependency order -->
  <script src="config.js"></script>
  <script src="game-state.js"></script>
  <script src="utils.js"></script>
  <script src="game-logic.js"></script>
  <script src="renderer.js"></script>
  <script src="drag-drop.js"></script>
  <script src="editor.js"></script>
  <script src="script.js"></script>
</body>
</html>
```
